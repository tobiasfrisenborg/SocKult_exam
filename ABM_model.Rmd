---
title: "Confidence in Joint Decision Making - A Simulation-Based Approach"
author: "Mie Arnau Martinez & Tobias Frisenborg Christensen"
date: "4/15/2020"
output: word_document
---

#  ABM Specifications and Parameters
## Properties of Agents
  - *Knowledge:* Normal distribution with mu=100 and sd=15 (like IQ)
    **https://www.mensa.org/iq/what-iq**
  - *Confidence Level:* Factor for confidence calculation, that reflects the mismatch between believed knowledge and true knowledge.
      Scores on a scale (Very unconfident, slightly unconfident, neutral, slightly overconfident, very overconfident)
        ***#TODO: Read literature to find confidence scale - does it scale with/depend on skill?***
  - *Confidence:* (knowledge * confidence)
  - *Reputation:* Proportion of correct responses out of total responses

## Properties of Groups
  - *Decision:*
    - Baseline: Confidence is the only factor for the group decision function (equality bias)
      Weight of agent response is calculated as **confidence / sum(confidence)**
    - Reputation: All agents can assign weights to their group members answers, based on reputation, to mitigate the equality bias.
      Weight of agent response is calculated as ...
        ***#TODO: Define this decision function***
    - Confirmation: If other agents have the same response, the weight of that response is increased (confirmation bias).
      Weight of agent response is calculated as ...
        ***#TODO: Define this decision function***

## Updating of properties:
  - *Reputation:* Proportion of correct responses in decimal percent
    (Updated at the end of each round)

Experimental setup:
  - *Manipulated Variables*
    - Group decision function (baseline/equality, reputation, confirmation)
    - Confidence
    - Group composition in relation to proportion of over- and unconfident agents
  - *Environment:*
    - Influence of reputation and confirmation bias in multiple models, versus one baseline model (equality bias)
  - *Outcome:*
    - Performance of group (mean payoff over trials)
    - Performance of group (time to find correct solution)



```{r Setup, include=FALSE}

# TODO: Define group compositions in terms of different confidence values
# TODO: FIgure out how much confirmation and reputation weighs in decision function

library(pacman)
pacman::p_load(tidyverse, tictoc)

seed = 16
set.seed(seed)







# read functions
source('functions/min_max_scale.R')
source('functions/create_agents.R')
source('functions/agent_prob_adjust.R')
source('functions/agent_decision.R')
source('functions/group_decision.R')
source('functions/run_simulation.R')


```



``` {r Simulation}

### CREATING AGENTS ###
agent_attr <- create_agents(group_size = 3, seed = seed)



### RUNNING THE SIMULATION ###
# baseline condition
sim_baseline     <- run_simulation(data          = agent_attr,
                                   condition     = 'baseline',
                                   n_trials      = 75,
                                   difficulty_mu = 1,
                                   difficulty_sd = 0.2,
                                   prob_error    = 0.02,
                                   seed          = seed)

# reputation condition
sim_reputation   <- run_simulation(data          = agent_attr,
                                   condition     = 'reputation',
                                   n_trials      = 75,
                                   difficulty_mu = 1,
                                   difficulty_sd = 0.2,
                                   prob_error    = 0.02,
                                   seed          = seed)

# confirmation condition
sim_confirmation <- run_simulation(data          = agent_attr,
                                   condition     = 'confirmation',
                                   n_trials      = 75,
                                   difficulty_mu = 1,
                                   difficulty_sd = 0.2,
                                   prob_error    = 0.02,
                                   seed          = seed)


```



Simulation: 7.13 sec elapsed
AVG Difficulty:  1.02034584754159
AVG Correct:     39.6
Simulation: 6.41 sec elapsed
AVG Difficulty:  1.02034584754159
AVG Correct:     50
Simulation: 7.53 sec elapsed
AVG Difficulty:  1.02034584754159
AVG Correct:     47.6